
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../toliman/">
      
      
        <link rel="next" href="../build/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.12">
    
    
      
        <title>Background - TOLIMAN</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.0d440cfe.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="TOLIMAN" class="md-header__button md-logo" aria-label="TOLIMAN" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TOLIMAN
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Background
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="TOLIMAN" class="md-nav__button md-logo" aria-label="TOLIMAN" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    TOLIMAN
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../CONTRIBUTING/" class="md-nav__link">
        CONTRIBUTING
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../INSTALLATION/" class="md-nav__link">
        INSTALLATION
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../LICENSE/" class="md-nav__link">
        LICENSE
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/hmc/" class="md-nav__link">
        Hmc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Toliman
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Toliman
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../collections/" class="md-nav__link">
        Collections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../io/" class="md-nav__link">
        Io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../math/" class="md-nav__link">
        Math
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../toliman/" class="md-nav__link">
        Toliman
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" checked>
      
      
      
        <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
          Build
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_6_6">
          <span class="md-nav__icon md-icon"></span>
          Build
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Background
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Background
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    API
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toliman.build.background.load_background_stars" class="md-nav__link">
    toliman.build.background.load_background_stars
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toliman.build.background.window_background_stars" class="md-nav__link">
    toliman.build.background.window_background_stars
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toliman.build.background.flux_relative_to_alpha_cen" class="md-nav__link">
    toliman.build.background.flux_relative_to_alpha_cen
  </a>
  
    <nav class="md-nav" aria-label="toliman.build.background.flux_relative_to_alpha_cen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toliman.build.background.flux_relative_to_alpha_cen--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toliman.build.background.save_background_stars" class="md-nav__link">
    toliman.build.background.save_background_stars
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../build/" class="md-nav__link">
        Build
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../https/" class="md-nav__link">
        Https
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mask/" class="md-nav__link">
        Mask
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../paths/" class="md-nav__link">
        Paths
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../phoenix/" class="md-nav__link">
        Phoenix
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    API
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toliman.build.background.load_background_stars" class="md-nav__link">
    toliman.build.background.load_background_stars
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toliman.build.background.window_background_stars" class="md-nav__link">
    toliman.build.background.window_background_stars
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toliman.build.background.flux_relative_to_alpha_cen" class="md-nav__link">
    toliman.build.background.flux_relative_to_alpha_cen
  </a>
  
    <nav class="md-nav" aria-label="toliman.build.background.flux_relative_to_alpha_cen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toliman.build.background.flux_relative_to_alpha_cen--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toliman.build.background.save_background_stars" class="md-nav__link">
    toliman.build.background.save_background_stars
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Background</h1>

<h2 id="overview">Overview</h2>
<p>Due to the nature of the PSF background stars have a good chance of 
affecting the science signal. In particular we are interested in the 
sidelobes although we haven't decided how to deal with these yet.
This file porvides an API for generating a typical sample of background 
stars using the Gaia database. </p>
<h2 id="api">API</h2>
<details class="note">
<summary><code>load_background_stars</code></summary>
<div class="mkdocstrings">

<div class="doc doc-object doc-function">


<a id="toliman.build.background.load_background_stars"></a>
  <div class="doc doc-contents first">
  
      <p>Retrieve a sample of backgound stars from the Gaia database.</p>
<p>Selects the top 12000 stars and contains only the entries that 
contain a measured flux. A word of caution is don't work near
to zero as some of the ra/dec may wrap around to 360, which 
causes things to break when recentering. This is not checked 
programmatically, but is a painful experience.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ra</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>The right ascension of section of sky to survey.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>dec</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>The declination of the section of sky to survey.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>rad</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>The radius of the conical region to survey.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>background</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>A sample of positions (ra, dec), and fluxes of a preselected 
background region of sky. The convention is RA along 0, DEC 
along 1 and FLUX along 2.</p></td>
        </tr>
    </tbody>
  </table>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">load_background_stars</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span>
</code></pre></div>

      <details class="quote">
        <summary>Source code in <code>toliman/build/background.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_background_stars</span><span class="p">(</span><span class="n">ra</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">dec</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">rad</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve a sample of backgound stars from the Gaia database.</span>

<span class="sd">    Selects the top 12000 stars and contains only the entries that </span>
<span class="sd">    contain a measured flux. A word of caution is don&#39;t work near</span>
<span class="sd">    to zero as some of the ra/dec may wrap around to 360, which </span>
<span class="sd">    causes things to break when recentering. This is not checked </span>
<span class="sd">    programmatically, but is a painful experience.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ra: float, deg </span>
<span class="sd">        The right ascension of section of sky to survey.</span>
<span class="sd">    dec: float, deg </span>
<span class="sd">        The declination of the section of sky to survey.</span>
<span class="sd">    rad: float, deg </span>
<span class="sd">        The radius of the conical region to survey.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    background: float </span>
<span class="sd">        A sample of positions (ra, dec), and fluxes of a preselected </span>
<span class="sd">        background region of sky. The convention is RA along 0, DEC </span>
<span class="sd">        along 1 and FLUX along 2.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```python </span>
<span class="sd">    &gt;&gt;&gt; load_background_stars(3.0, 3.0, 2.0)</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">ra</span> <span class="o">&lt;=</span> <span class="n">rad</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;`ra &lt;= rad`. Coordinate wrapping may occur.&quot;</span><span class="p">)</span>

    <span class="kn">from</span> <span class="nn">astroquery.gaia</span> <span class="kn">import</span> <span class="n">Gaia</span>

    <span class="n">bg_stars</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">Gaia</span><span class="o">.</span><span class="n">launch_job</span><span class="p">(</span><span class="n">CONICAL_QUERY</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">rad</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">bg_stars</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="s2">&quot;ra&quot;</span><span class="p">])</span> <span class="o">-</span> <span class="n">ra</span><span class="p">,</span>
            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">bg_stars</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="s2">&quot;dec&quot;</span><span class="p">])</span> <span class="o">-</span> <span class="n">dec</span><span class="p">,</span>
            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">bg_stars</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="s2">&quot;flux&quot;</span><span class="p">]),</span>
        <span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">float</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div><h2 data-role="function" id="toliman.build.background.load_background_stars"></h2>
</div>
</details>
<details class="note">
<summary><code>window_background_stars</code></summary>
<div class="mkdocstrings">

<div class="doc doc-object doc-function">


<a id="toliman.build.background.window_background_stars"></a>
  <div class="doc doc-contents first">
  
      <p>Get a square array of background stars.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>background</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Coordinates (ra, dec), and fluxes of a set of stars. The
conventions is [RA, DEC, FLUX] along the leading axis.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>width</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>The width of the square region to cut.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>background_in_square</code></td>          <td>
                <code>float, [deg, deg, W</code>
          </td>
          <td><p>The coordinates (ra, dec) and fluxes of a set of background 
stars within a square.</p></td>
        </tr>
    </tbody>
  </table>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">bgstars</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">load_background_stars</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">windowed_bgstars</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">window_bg_stars</span><span class="p">(</span><span class="n">bgstars</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</code></pre></div>

      <details class="quote">
        <summary>Source code in <code>toliman/build/background.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">window_background_stars</span><span class="p">(</span><span class="n">background</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a square array of background stars.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    background: float, [deg, deg, W/m/m]</span>
<span class="sd">        Coordinates (ra, dec), and fluxes of a set of stars. The</span>
<span class="sd">        conventions is [RA, DEC, FLUX] along the leading axis.</span>
<span class="sd">    width: float, deg</span>
<span class="sd">        The width of the square region to cut.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    background_in_square: float, [deg, deg, W/m/m]</span>
<span class="sd">        The coordinates (ra, dec) and fluxes of a set of background </span>
<span class="sd">        stars within a square.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; bgstars: float = load_background_stars(0.0, 0.0, 2.0)</span>
<span class="sd">    &gt;&gt;&gt; windowed_bgstars: float = window_bg_stars(bgstars, 1.0)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">in_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">background</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">:])</span> <span class="o">&lt;</span> <span class="n">width</span>
    <span class="n">logical_and</span><span class="p">:</span> <span class="n">callable</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">in_range</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="n">logical_and</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">in_width</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">background</span><span class="p">[:,</span> <span class="n">in_range</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div><h2 data-role="function" id="toliman.build.background.window_background_stars"></h2>
</div>
</details>
<details class="note">
<summary><code>flux_relative_to_alpha_cen</code></summary>
<div class="mkdocstrings">

<div class="doc doc-object doc-function">


<a id="toliman.build.background.flux_relative_to_alpha_cen"></a>
  <div class="doc doc-contents first">
  
      <p>Convert the flux into relative units.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>background</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>The coordinates (ra, dec) and fluxes of a sample of background 
stars. The convention is [RA, DEC, FLUX] along the leading 
(zeroth) axis.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>
      <h3 id="toliman.build.background.flux_relative_to_alpha_cen--returns">Returns</h3>
<p>background: float, [deg, deg, W/m/m]
    The coordinates (ra, dec) and fluxes of the sample. The same
    indexing convention is maintained but the units of the flux 
    are altered.</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">bgstars</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">load_background_stars</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">win_stars</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">window_background_stars</span><span class="p">(</span><span class="n">bgstars</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rel_stars</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">flux_relative_to_alpha_cen</span><span class="p">(</span><span class="n">win_stars</span><span class="p">)</span>
</code></pre></div>

      <details class="quote">
        <summary>Source code in <code>toliman/build/background.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">flux_relative_to_alpha_cen</span><span class="p">(</span><span class="n">background</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the flux into relative units.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    background: float, [deg, deg, W/m/m]</span>
<span class="sd">        The coordinates (ra, dec) and fluxes of a sample of background </span>
<span class="sd">        stars. The convention is [RA, DEC, FLUX] along the leading </span>
<span class="sd">        (zeroth) axis.</span>

<span class="sd">    Returns </span>
<span class="sd">    -------</span>
<span class="sd">    background: float, [deg, deg, W/m/m]</span>
<span class="sd">        The coordinates (ra, dec) and fluxes of the sample. The same</span>
<span class="sd">        indexing convention is maintained but the units of the flux </span>
<span class="sd">        are altered.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; bgstars: float = load_background_stars(0.0, 0.0, 2.0)</span>
<span class="sd">    &gt;&gt;&gt; win_stars: float = window_background_stars(bgstars, 1.0)</span>
<span class="sd">    &gt;&gt;&gt; rel_stars: float = flux_relative_to_alpha_cen(win_stars)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
            <span class="n">background</span><span class="p">[</span><span class="n">RA</span><span class="p">],</span> 
            <span class="n">background</span><span class="p">[</span><span class="n">DEC</span><span class="p">],</span>
            <span class="n">background</span><span class="p">[</span><span class="n">FLUX</span><span class="p">]</span> <span class="o">/</span> <span class="n">ALPHA_CEN_FLUX</span>
        <span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">float</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div><h2 data-role="function" id="toliman.build.background.flux_relative_to_alpha_cen"></h2>
<h3 id="toliman.build.background.flux_relative_to_alpha_cen--returns">Returns</h3>
</div>
</details>
<details class="note">
<summary><code>save_background_stars</code></summary>
<div class="mkdocstrings">

<div class="doc doc-object doc-function">


<a id="toliman.build.background.save_background_stars"></a>
  <div class="doc doc-contents first">
  
      <p>Save the background stars to a prespecified location.</p>
<p>In order to simplify the interface with programs written using 
<code>toliman</code> all resource files are stored in a specfic directory
<code>TOLIMAN_HOME</code>.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>background</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>The coordinates (ra, dec) and fluxes of a sample of background 
stars. The indexing convention is [RA, DEC, FLUX] along the 
leading axis.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">bgstars</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">load_background_stars</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">win_stars</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">window_background_stars</span><span class="p">(</span><span class="n">bgstars</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rel_stars</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">flux_relative_to_alpha_cen</span><span class="p">(</span><span class="n">win_stars</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">save_background_stars</span><span class="p">(</span><span class="n">rel_stars</span><span class="p">)</span>
</code></pre></div>

      <details class="quote">
        <summary>Source code in <code>toliman/build/background.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save_background_stars</span><span class="p">(</span><span class="n">background</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save the background stars to a prespecified location.</span>

<span class="sd">    In order to simplify the interface with programs written using </span>
<span class="sd">    `toliman` all resource files are stored in a specfic directory</span>
<span class="sd">    `TOLIMAN_HOME`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    background: float, [deg, deg, W/m/m]</span>
<span class="sd">        The coordinates (ra, dec) and fluxes of a sample of background </span>
<span class="sd">        stars. The indexing convention is [RA, DEC, FLUX] along the </span>
<span class="sd">        leading axis.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; bgstars: float = load_background_stars(0.0, 0.0, 2.0)</span>
<span class="sd">    &gt;&gt;&gt; win_stars: float = window_background_stars(bgstars, 1.0)</span>
<span class="sd">    &gt;&gt;&gt; rel_stars: float = flux_relative_to_alpha_cen(win_stars)</span>
<span class="sd">    &gt;&gt;&gt; save_background_stars(rel_stars)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">background</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid background stars.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">paths</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;background.csv&quot;</span><span class="p">]),</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sheet</span><span class="p">:</span>
        <span class="n">sheet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;ra,dec,rel_flux</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">background</span><span class="p">[</span><span class="n">RA</span><span class="p">]</span><span class="o">.</span><span class="n">size</span><span class="p">):</span>
            <span class="n">sheet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">,&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">background</span><span class="p">[</span><span class="n">RA</span><span class="p">][</span><span class="n">row</span><span class="p">]))</span>
            <span class="n">sheet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">,&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">background</span><span class="p">[</span><span class="n">DEC</span><span class="p">][</span><span class="n">row</span><span class="p">]))</span>
            <span class="n">sheet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">background</span><span class="p">[</span><span class="n">FLUX</span><span class="p">][</span><span class="n">row</span><span class="p">]))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div><h2 data-role="function" id="toliman.build.background.save_background_stars"></h2>
</div>
</details>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.4b2c34cd.min.js"></script>
      
    
  </body>
</html>